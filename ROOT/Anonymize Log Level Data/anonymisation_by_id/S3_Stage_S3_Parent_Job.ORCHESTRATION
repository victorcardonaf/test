{"job":{"components":{"877615":{"id":877615,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-1111,"y":-345,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[877633],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877616":{"id":877616,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-999,"y":-295,"width":32,"height":32,"inputConnectorIDs":[877633],"outputSuccessConnectorIDs":[877626],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Get configuration from table"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"pyvar_processname =processname\ncursor = context.cursor()\ncursor.execute(\"select src_url, src_folder, src_prefix, src_suffix, \"+\n\" des_url,des_folder,des_prefix, des_suffix ,archivefolderpath ,stagetablename ,stageoutboundtablename ,query,\"+\n\" src_filetype,src_filedelimiter,src_filequoter ,des_filetype,des_filedelimiter,des_filequoter  from etl_configuration \"+\n\" where processname = '%s' limit 1\" %pyvar_processname )\n##data = cursor.fetchone()[0]\n##assing data retured from table into python variable \ndata =cursor.fetchone()\npyvar_src_url = data[0]\npyvar_src_folder = data[1]\npyvar_src_prefix = data[2]\npyvar_src_suffix = data[3]\npyvar_des_url = data[4]\npyvar_des_folder = data[5]\npyvar_des_prefix = data[6]\npyvar_des_suffix = data[7]\nprvar_arc_folder =data[8]\nprvar_stagetablename =data[9]\nprvar_stageoutboundtablename =data[10]\nprvar_query =data[11]\npy_src_filetype =data[12]\npy_src_filedelimiter =data[13]\npy_src_filequoter =data[14]\npy_des_filetype =data[15]\npy_des_filedelimiter =data[16]\npy_des_filequoter =data[17]\nprvar_arc_folder =pyvar_src_url+ '/'+prvar_arc_folder +'/'\npyvar_src_url = pyvar_src_url +'/'+pyvar_src_folder +'/'\npyvar_des_url = pyvar_des_url +'/'+pyvar_des_folder +'/'\n##print pyvar_src_url,pyvar_des_url\n##update environment\ncontext.updateVariable('processname',pyvar_processname )\ncontext.updateVariable('src_url',pyvar_src_url )\ncontext.updateVariable('src_folder',pyvar_src_folder )\ncontext.updateVariable('src_prefix', pyvar_src_prefix)\ncontext.updateVariable('src_suffix',pyvar_src_suffix )\ncontext.updateVariable('des_url',pyvar_des_url )\ncontext.updateVariable('des_folder',pyvar_des_folder )\ncontext.updateVariable('des_prefix',pyvar_des_prefix )\ncontext.updateVariable('des_suffix',pyvar_des_suffix )\ncontext.updateVariable('archivefolderpath',prvar_arc_folder )\ncontext.updateVariable('stagetablename',prvar_stagetablename )\ncontext.updateVariable('stageoutboundtablename',prvar_stageoutboundtablename )\ncontext.updateVariable('query',prvar_query )\ncontext.updateVariable('src_filetype',prvar_query )\ncontext.updateVariable('src_filedelimiter',prvar_query )\ncontext.updateVariable('src_filequoter',prvar_query )\ncontext.updateVariable('query',prvar_query )\ncontext.updateVariable('src_filetype',py_src_filetype )\ncontext.updateVariable('src_filedelimiter',py_src_filedelimiter )\ncontext.updateVariable('src_filequoter',py_src_filequoter )\ncontext.updateVariable('des_filetype',py_des_filetype )\ncontext.updateVariable('des_filedelimiter',py_des_filedelimiter )\ncontext.updateVariable('des_filequoter',py_des_filequoter )\nprint src_url ,src_prefix,archivefolderpath"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877617":{"id":877617,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-886,"y":-191,"width":32,"height":32,"inputConnectorIDs":[877626],"outputSuccessConnectorIDs":[877627],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Get_CurrentTimeStamp"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Udating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\nfrom datetime import datetime\nimport calendar\n\ncurrenttime = datetime.utcnow()\ncurrenttime_unixtime = calendar.timegm(currenttime.utctimetuple())\ncurrenttime_stg =currenttime.strftime('%Y%m%d%H%M%S')\npyfilename =des_prefix + '_'+currenttime_stg\ncontext.updateVariable('Batchid', str(currenttime_stg))\ncontext.updateVariable('des_prefix', pyfilename)\nprint (currenttime ,currenttime_unixtime,Batchid ,currenttime_stg,pyfilename)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python 3"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877618":{"id":877618,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":237373210,"x":-750,"y":-127,"width":32,"height":32,"inputConnectorIDs":[877627],"outputSuccessConnectorIDs":[877629],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Truncate Stage Table"}}}},"visible":true},"2":{"slot":2,"name":"Tables to Truncate","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${stagetablename}"}}}},"visible":true},"3":{"slot":3,"name":"Schema ","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"loading"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877619":{"id":877619,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":1058406652,"x":-658,"y":2,"width":32,"height":16,"inputConnectorIDs":[877629],"outputSuccessConnectorIDs":[877632],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"File Iterator 0"}}}},"visible":true},"2":{"slot":2,"name":"Input Data Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"S3"}}}},"visible":true},"3":{"slot":3,"name":"Set Home Directory as Root","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"4":{"slot":4,"name":"Input Data URL","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"5":{"slot":5,"name":"Recursive","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"6":{"slot":6,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"7":{"slot":7,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":""}}}},"visible":false},"8":{"slot":8,"name":"SFTP Key","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"9":{"slot":9,"name":"Filter Regex","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${src_prefix}"}}}},"visible":true},"10":{"slot":10,"name":"Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"filename"},"2":{"slot":2,"type":"STRING","value":"Filename"}}}},"visible":true},"11":{"slot":11,"name":"Ignore Hidden","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":false},"12":{"slot":12,"name":"Domain","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"13":{"slot":13,"name":"Max Recursion Depth","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"6"}}}},"visible":false},"14":{"slot":14,"name":"Max Iterations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"100"}}}},"visible":true},"15":{"slot":15,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true},"16":{"slot":16,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"17":{"slot":17,"name":"Input Data URL","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://${src_url}"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[877635],"inputIterationConnectorIDs":[]},"877620":{"id":877620,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-474,"y":82,"width":32,"height":32,"inputConnectorIDs":[877632],"outputSuccessConnectorIDs":[877631],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"GenerateID_and_anonymized data"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\t\nDROP TABLE if exists loading.${stageoutboundtablename};\n\nselect DENSE_RANK() OVER (ORDER BY \"uu_id\" ASC) AS \"Annomid\" ,c.*,${Batchid} as \"BatchID\"\ninto loading.${stageoutboundtablename}\nfrom loading.${stagetablename} c ;\n\n${query}\n\n/*\nselect DENSE_RANK() OVER (ORDER BY \"uu_id\" ASC) AS \"AnonID\" ,${Batchid} as \"BatchID\",c.*\ninto loading.${stageoutboundtablename}\nfrom loading.${stagetablename} c ;\n---\nupdate loading.${stageoutboundtablename}\nSet uu_id = null\n--,account_id = null\nfrom gdpr_countries gdpr\nwhere loading.${stageoutboundtablename}.country=gdpr.code;\n*/"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"DISABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877621":{"id":877621,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-44,"y":149,"width":32,"height":32,"inputConnectorIDs":[877634],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Log outbound process status_Error"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"insert into etl_outbound_log(processname,batchid, path,filename,status,message,rowcount)\nvalues('${processname}','${Batchid}','${des_url}','${des_prefix}','${status}','${message}',${rowcount})"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"DISABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877622":{"id":877622,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-201,"y":290,"width":32,"height":32,"inputConnectorIDs":[877630],"outputSuccessConnectorIDs":[877628],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Log Outbound file process status -Success"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"insert into etl_outbound_log(processname,batchid, path,filename,status,message,rowcount)\n--(processname, batchid, path, filename, rowcount, status, message)\n--values ('${processname}','${Batchid}','${src_url}','${filename}',${rowcont},'${status}','${message}')\nvalues('${processname}','${Batchid}','${des_url}','${des_prefix}','${status}','${message}',${rowcount})\n\n\n/*\ninsert into ProcessLog (Name,FileName,RowCount,Status)\n--select '${job_name}','${S3FileName}',${rowcont},'${status}' run_history_id\nvalues('${job_name}','${S3FileName}',${rowcont},'${status}')\n*/"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"DISABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877623":{"id":877623,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":237373210,"x":-1,"y":223,"width":32,"height":32,"inputConnectorIDs":[877628],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Truncate Stage tables"}}}},"visible":true},"2":{"slot":2,"name":"Tables to Truncate","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${stagetablename}"}}}},"visible":true},"3":{"slot":3,"name":"Schema ","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"loading"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"DISABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877624":{"id":877624,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":-691,"y":75,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"S3_to_Stage_Child_Job"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"S3_to_Stage_Child_Job"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[877635]},"877625":{"id":877625,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1170916816,"x":-301,"y":175,"width":32,"height":32,"inputConnectorIDs":[877631],"outputSuccessConnectorIDs":[877630],"outputFailureConnectorIDs":[877634],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Row Count","mapTo":"rowcount"},"2":{"slot":2,"fromId":null,"fromName":"Status","mapTo":"status"},"3":{"slot":3,"fromId":null,"fromName":"Message","mapTo":"message"}},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"upload_to_S3"}}}},"visible":true},"2":{"slot":2,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"loading"}}}},"visible":true},"3":{"slot":3,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${stageoutboundtablename}"}}}},"visible":true},"4":{"slot":4,"name":"S3 URL Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://${src_url}"}}}},"visible":true},"5":{"slot":5,"name":"S3 Object Prefix","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${des_prefix}"}}}},"visible":true},"6":{"slot":6,"name":"Delimiter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${des_filedelimiter}"}}}},"visible":true},"7":{"slot":7,"name":"Compress Data","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"8":{"slot":8,"name":"Null As","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true},"9":{"slot":9,"name":"Output Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${des_filetype}"}}}},"visible":true},"10":{"slot":10,"name":"Multiple Files","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"11":{"slot":11,"name":"Row limit per file","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":false},"12":{"slot":12,"name":"Include Header","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"40000":{"slot":40000,"name":"Encryption","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":true},"40001":{"slot":40001,"name":"KMS Key ID","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"DISABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"877629":{"id":877629,"sourceID":877618,"targetID":877619},"877628":{"id":877628,"sourceID":877622,"targetID":877623},"877631":{"id":877631,"sourceID":877620,"targetID":877625},"877630":{"id":877630,"sourceID":877625,"targetID":877622},"877627":{"id":877627,"sourceID":877617,"targetID":877618},"877626":{"id":877626,"sourceID":877616,"targetID":877617},"877632":{"id":877632,"sourceID":877619,"targetID":877620}},"failureConnectors":{"877634":{"id":877634,"sourceID":877625,"targetID":877621}},"unconditionalConnectors":{"877633":{"id":877633,"sourceID":877615,"targetID":877616}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{"877635":{"id":877635,"sourceID":877619,"targetID":877624}},"noteConnectors":{},"canUndo":false,"undoCommand":"","undoCreated":-1,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"877610":{"id":877610,"x":-1432,"y":-199,"width":468,"height":63,"text":"**Get_CurrentTimeStamp**\nGet current date . This is going to be used to as part of outbound file name and also serves as batchID \neg 2018-04-25 15:04:34.752489 = 20180425150434"},"877611":{"id":877611,"x":-991,"y":-375,"width":468,"height":63,"text":"**Get configuration from table**\nBased on the Processname it retrieve and update environmental variable values\nquery look some thing like :select src_url, src_folder, src_prefix, src_suffix, des_url,des_folder,des_prefix, des_suffix,archivefolderpath ,stagetablename ,stageoutboundtablename ,query from etl_configuration where processname = XXXX limit 1"},"877612":{"id":877612,"x":-1102,"y":-18,"width":365,"height":66,"text":"**S3_to_Stage_Child_Job**\nBased on the values provided above it goes to S3 buket and download file and load it to stage table Copy the file to archive folder and delete the original file from a folder and also logs the status of the process"},"877613":{"id":877613,"x":-491,"y":-69,"width":250,"height":58,"text":"**GenerateID_and_anonymized data**\ncreates outbound table based on the stagetable \nwith two additional column \nAnnomid= unique user id \nbatchid = timestamp \nit also anonymize column necessary column (eg account id and uu_id)"},"877614":{"id":877614,"x":-650,"y":134,"width":250,"height":58,"text":"**S3 Unload**\nupload file to S3 from stage table after running necessary query passed in the above process"}},"variables":{"message":{"definition":{"name":"message","type":"TEXT","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":""},"rowcount":{"definition":{"name":"rowcount","type":"DECIMAL","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":"0"},"status":{"definition":{"name":"status","type":"TEXT","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":""},"src_urlwithfolder":{"definition":{"name":"src_urlwithfolder","type":"TEXT","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":""}},"grids":{}},"info":{"name":"S3_Stage_S3_Parent_Job","description":"","type":"ORCHESTRATION"}}