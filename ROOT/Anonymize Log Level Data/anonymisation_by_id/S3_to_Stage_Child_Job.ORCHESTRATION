{"job":{"components":{"877637":{"id":877637,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-906,"y":-144,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[877644],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877638":{"id":877638,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-457,"y":-89,"width":32,"height":32,"inputConnectorIDs":[877642],"outputSuccessConnectorIDs":[877643],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Log file process status -Success"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\t\ninsert into etl_inbound_log\n(processname, batchid, path, filename, rowcount, status, message)\nvalues ('${processname}','${Batchid}','${src_url}','${filename}',${rowcount},'${status}','${message}')\n\n\n/*\ninsert into ProcessLog (Name,FileName,RowCount,Status)\n--select '${job_name}','${S3FileName}',${rowcont},'${status}' run_history_id\nvalues('${job_name}','${S3FileName}',${rowcont},'${status}')\n*/"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877639":{"id":877639,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-813,"y":71,"width":32,"height":32,"inputConnectorIDs":[877645],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Log file process status-Error"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"insert into etl_inbound_log\n(processname, batchid, path, filename, status, message,rowcount)\nvalues ('${processname}','${Batchid}','${src_url}','${filename}','${status}','${message}',${rowcount})"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877640":{"id":877640,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1449697230,"x":-723,"y":-83,"width":32,"height":32,"inputConnectorIDs":[877644],"outputSuccessConnectorIDs":[877642],"outputFailureConnectorIDs":[877645],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Load data from S3 to Stage table"}}}},"visible":true},"2":{"slot":2,"name":"Target Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${stagetablename}"}}}},"visible":true},"3":{"slot":3,"name":"Load Columns","elements":{},"visible":true},"4":{"slot":4,"name":"S3 URL Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://${src_url}"}}}},"visible":true},"5":{"slot":5,"name":"S3 Object Prefix","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${filename}"}}}},"visible":true},"6":{"slot":6,"name":"Data File Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${src_filetype}"}}}},"visible":true},"7":{"slot":7,"name":"Fixed Width Spec","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"8":{"slot":8,"name":"Delimiter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${src_filedelimiter}"}}}},"visible":true},"9":{"slot":9,"name":"CSV Quoter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${src_filequoter}"}}}},"visible":false},"10":{"slot":10,"name":"JSON Layout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"auto"}}}},"visible":false},"11":{"slot":11,"name":"S3 Bucket Region","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"eu-west-1"}}}},"visible":true},"13":{"slot":13,"name":"Compression Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"GZip"}}}},"visible":true},"14":{"slot":14,"name":"Encoding","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"UTF8"}}}},"visible":true},"15":{"slot":15,"name":"Remove Quotes","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"16":{"slot":16,"name":"Replace Invalid Characters","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"?"}}}},"visible":true},"17":{"slot":17,"name":"Maximum Errors","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"0"}}}},"visible":true},"18":{"slot":18,"name":"Date Format","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"auto"}}}},"visible":true},"19":{"slot":19,"name":"Time Format","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"auto"}}}},"visible":true},"20":{"slot":20,"name":"Ignore Header Rows","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true},"21":{"slot":21,"name":"Accept Any Date","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"22":{"slot":22,"name":"Ignore Blank Lines","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"23":{"slot":23,"name":"Truncate Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"24":{"slot":24,"name":"Fill Record","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"25":{"slot":25,"name":"Trim Blanks","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"26":{"slot":26,"name":"NULL As","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\\\\N"}}}},"visible":true},"27":{"slot":27,"name":"Empty As Null","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"28":{"slot":28,"name":"Blanks As Null","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"29":{"slot":29,"name":"Comp Update","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}}},"visible":true},"30":{"slot":30,"name":"Stat Update","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}}},"visible":true},"31":{"slot":31,"name":"Escape","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"32":{"slot":32,"name":"Round Decimals","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"33":{"slot":33,"name":"Manifest","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"34":{"slot":34,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"loading"}}}},"visible":true},"35":{"slot":35,"name":"","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"36":{"slot":36,"name":"","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":null}}}},"visible":false},"37":{"slot":37,"name":"Explicit IDs","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"38":{"slot":38,"name":"IAM Role ARN","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"arn:aws:iam::<aws-account-id>:role/<role-name>"}}}},"visible":true},"112":{"slot":112,"name":"Avro Layout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"auto"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877641":{"id":877641,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-286,"y":-39,"width":32,"height":32,"inputConnectorIDs":[877643],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"move processed to file to archive folder"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Udating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\nimport boto3\n\n# Get the service client\ns3 = boto3.client('s3')\n\n# Copies object located in mybucket at mykey\n# to the location otherbucket at otherkey\ncopy_source = {\n    'Bucket': src_url,\n    'Key': filename\n}\ns3.copy(copy_source, archivefolderpath,filename )"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"877643":{"id":877643,"sourceID":877638,"targetID":877641},"877642":{"id":877642,"sourceID":877640,"targetID":877638}},"failureConnectors":{"877645":{"id":877645,"sourceID":877640,"targetID":877639}},"unconditionalConnectors":{"877644":{"id":877644,"sourceID":877637,"targetID":877640}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"canUndo":false,"undoCommand":"","undoCreated":-1,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{},"variables":{"message":{"definition":{"name":"message","type":"TEXT","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":""},"rowcount":{"definition":{"name":"rowcount","type":"DECIMAL","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":"0"},"status":{"definition":{"name":"status","type":"TEXT","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":""}},"grids":{}},"info":{"name":"S3_to_Stage_Child_Job","description":null,"type":"ORCHESTRATION"}}