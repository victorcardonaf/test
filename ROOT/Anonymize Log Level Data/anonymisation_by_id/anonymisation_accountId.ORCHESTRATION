{"job":{"components":{"877602":{"id":877602,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-539,"y":-163,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[877607,877606],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877603":{"id":877603,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":-362,"y":-110,"width":32,"height":32,"inputConnectorIDs":[877607],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Python Script 0"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\nprint account_id\nif account_id is None or len(account_id) == 0:\n  print 'account_id is empty'\nif uuid is None or len(uuid) == 0:\n  print 'uuid is empty'"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"877604":{"id":877604,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-592,"y":-46,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"anonymisation_by_accountID"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"drop table if exists  #tmp_del_accountid ;\ncreate table #tmp_del_accountid (account_id varchar(100) ,client_id bigint ,cxt_uu_guid varchar(100) )\n\n-- get all uu_id tied to the account id\ninsert into #tmp_del_accountid (account_id , client_id ,cxt_uu_guid )\nselect distinct account_id , client_id ,uu_id\nfrom  ${schema_name}.ods_analytics ods (nolock)\nwhere 1 = 1\n      and uu_id = '${account_id}' ;\n\n\n\nupdate ${schema_name}.connextra_segment\nset\n    cxt_uu_guid = ''\nwhere 1 = 1\n      and cxt_uu_guid in (select cxt_uu_guid from #tmp_del_accountid  );\n\n\nupdate ${schema_name}.ods_analytics\nset\n    uu_id = '',\n    account_id = ''\nwhere\n    1 = 1\n    and account_id = '${account_id}';\n\nupdate ${schema_name}.ods_betslip\nset\n    uu_id = '',\n    account_id = ''\nwhere 1 = 1\n      and account_id = '${account_id}';\n\nupdate ${schema_name}.ods_event\nset\n    uu_id = ''\nwhere 1 = 1\n      and uu_id in (select cxt_uu_guid from #tmp_del_accountid  );\n\nupdate consent.fact_consent\n  set account_id = ''\n  ,updatedate = getdate()\nfrom    #tmp_del_accountid ods (nolock)\nwhere 1 = 1\n      and account_id = '${account_id}'\n      and  clientid = 'Should we do this???' ;\n\nupdate consent.dim_consent\n  set account_id = ''\n  ,updatedate = getdate()\nfrom    #tmp_del_accountid ods (nolock)\nwhere 1 = 1\n      and account_id = '${account_id}'\n      and  clientid = 'Should we do this???'"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"DISABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[877608]},"877605":{"id":877605,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":1227580116,"x":-592,"y":-46,"width":32,"height":16,"inputConnectorIDs":[877606],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Table Iterator 0"}}}},"visible":true},"2":{"slot":2,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"vw_activeclient_schema"}}}},"visible":true},"3":{"slot":3,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"schema_name"},"2":{"slot":2,"type":"STRING","value":"schema_name"}}}},"visible":true},"4":{"slot":4,"name":"Ordering","elements":{},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"6":{"slot":6,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"public"}}}},"visible":true},"7":{"slot":7,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[877608],"inputIterationConnectorIDs":[]}},"successConnectors":{},"failureConnectors":{},"unconditionalConnectors":{"877607":{"id":877607,"sourceID":877602,"targetID":877603},"877606":{"id":877606,"sourceID":877602,"targetID":877605}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{"877608":{"id":877608,"sourceID":877605,"targetID":877604}},"noteConnectors":{},"canUndo":false,"undoCommand":"","undoCreated":-1,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"877601":{"id":877601,"x":-495,"y":-21,"width":250,"height":58,"text":"**dont forget to enable task**"}},"variables":{"uuid":{"definition":{"name":"uuid","type":"TEXT","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":""},"account_id":{"definition":{"name":"account_id","type":"TEXT","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":""},"schema_name":{"definition":{"name":"schema_name","type":"TEXT","scope":"BRANCH","description":null,"visibility":"PUBLIC"},"value":""}},"grids":{}},"info":{"name":"anonymisation_accountId","description":"","type":"ORCHESTRATION"}}